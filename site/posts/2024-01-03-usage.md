# Usage

Medusa provides three core commands for managing your static site: scaffolding new projects, building for production, and running a development server.

## Creating a New Site

Start a fresh project with the `new` command:

```bash
medusa new mysite
cd mysite
```

This creates a complete project structure with example layouts, partials, and starter content. The directory must be empty or non-existent.

## Building for Production

Generate your static site into the `output/` directory:

```bash
medusa build
```

The build process:
1. Compiles all Markdown and Jinja2 templates
2. Processes Tailwind CSS, including only used classes
3. Minifies JavaScript files
4. Generates sitemap.xml and RSS feed
5. Copies static assets

### Including Drafts

By default, files prefixed with `_` are treated as drafts and excluded from builds. Include them with:

```bash
medusa build --drafts
```

## Development Server

Run a local server with live reload for rapid development:

```bash
medusa serve
```

The server watches for file changes and automatically refreshes your browser. By default it runs on `localhost:4000`.

### Server Options

```bash
# Include draft content
medusa serve --drafts

# Custom port
medusa serve --port 3000

# Custom WebSocket port for live reload
medusa serve --ws-port 3001
```

The WebSocket port defaults to your HTTP port plus one. Both ports can also be configured in `medusa.yaml`.

## Command Reference

| Command | Description |
|---------|-------------|
| `medusa new NAME` | Create a new project in the `NAME/` directory |
| `medusa build` | Build the site to `output/` |
| `medusa build --drafts` | Build including draft content |
| `medusa serve` | Start development server with live reload |
| `medusa serve --drafts` | Serve including draft content |
| `medusa serve --port PORT` | Use custom HTTP port |
| `medusa serve --ws-port PORT` | Use custom WebSocket port |

## Configuration

Optional settings can be placed in `medusa.yaml` at your project root:

```yaml
port: 4000
ws_port: 4001
```

Command-line flags override configuration file settings.
