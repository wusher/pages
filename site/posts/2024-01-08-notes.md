# Notes

Important details and edge cases to keep in mind when working with Medusa.

## Frontmatter

Markdown files support YAML frontmatter for metadata:

```yaml
---
title: My Page Title
description: A brief description of the page
tags: [python, web, tutorial]
border_color: "#5E97A8"
github_url: https://github.com/user/repo
pypi_url: https://pypi.org/project/name
---

# Content starts here...
```

### Common Frontmatter Fields

| Field | Purpose |
|-------|---------|
| `title` | Override the auto-detected title |
| `description` | Page description for SEO and listings |
| `tags` | List of tags for categorization |
| `layout` | Specify a different layout template |

### Custom Fields

Any additional fields in frontmatter are accessible via `current_page.frontmatter`:

```jinja
{% if current_page.frontmatter.github_url %}
  <a href="{{ current_page.frontmatter.github_url }}">GitHub</a>
{% endif %}
```

## Draft Content

Files and directories prefixed with `_` are treated as drafts. This applies to both individual files and entire directories:

```
site/
  posts/
    _2024-01-20-work-in-progress.md  # Draft post
    2024-01-15-published.md          # Published post
  _drafts/                           # Entire directory of drafts
    idea-1.md
    idea-2.md
```

Drafts are excluded from:
- Production builds (`medusa build`)
- Sitemap generation
- RSS feeds
- Page collections in templates

Include drafts during development with the `--drafts` flag:

```bash
medusa serve --drafts
medusa build --drafts
```

## Image Handling

Medusa automatically rewrites relative image paths in Markdown and Jinja templates. Images referenced with relative paths are resolved to `/assets/images/...` in the output.

### Markdown Images

```markdown
![Photo](../assets/images/photo.jpg)
```

Becomes:

```html
<img src="/assets/images/photo.jpg" alt="Photo">
```

### Template Images

Use `url_for()` for explicit control:

```jinja
<img src="{{ url_for('assets/images/photo.jpg') }}">
```

## Dependencies

When you run `medusa new`, the generated project includes a `package.json` with:

- `tailwindcss` - CSS framework and compiler
- `@tailwindcss/typography` - Prose styling plugin
- `terser` - JavaScript minifier

Install dependencies with:

```bash
npm install
```

## Pretty URLs

Medusa generates clean URLs by default:

| Source | Output |
|--------|--------|
| `about.md` | `/about/index.html` → `/about/` |
| `posts/hello.md` | `/posts/hello/index.html` → `/posts/hello/` |

This means links like `/about/` work without file extensions.

## Date Parsing

Dates are extracted from filenames in the format `YYYY-MM-DD-slug.md`:

```
2024-01-15-my-post.md  →  date: 2024-01-15, slug: my-post
```

If no date is in the filename, Medusa uses the file modification time.

## Template Resolution

Layouts and partials are resolved from:
1. `site/_layouts/` for page layouts
2. `site/_partials/` for included components

The default layout is `default.html.jinja`. Override it per-page by setting `layout` in frontmatter.

## Build Output

The `output/` directory is completely rebuilt on each `medusa build`. Never edit files there directly. Your changes will be lost.

For deployment, point your web server or hosting platform at the `output/` directory.

## Tailwind Configuration

The `tailwind.config.js` file controls CSS compilation:

```javascript
module.exports = {
  content: [
    "./site/**/*.{md,jinja}",
    "./assets/**/*.js"
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Merriweather', 'serif']
      }
    }
  },
  plugins: [
    require('@tailwindcss/typography')
  ]
}
```

The `@tailwindcss/typography` plugin provides the `prose` class for beautiful article styling.
