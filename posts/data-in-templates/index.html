<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Data in Templates â€” My Medusa Site</title>
  <meta name="description" content="Data in Templates">
  <style>
    @font-face {
      font-family: 'Merriweather';
      src: url('https://wusher.github.io/pages/assets/fonts/merriweather/Merriweather-VariableFont_opsz,wdth,wght.ttf') format('truetype');
      font-weight: 100 900;
      font-style: normal;
    }
    @font-face {
      font-family: 'Merriweather';
      src: url('https://wusher.github.io/pages/assets/fonts/merriweather/Merriweather-Italic-VariableFont_opsz,wdth,wght.ttf') format('truetype');
      font-weight: 100 900;
      font-style: italic;
    }
  </style>
  <link rel="stylesheet" href="https://wusher.github.io/pages/assets/css/main.css">
</head>
<body class="min-h-screen flex flex-col">
  <header class="px-6 pt-6 mb-10">
  <nav class="max-w-[50ch] mx-auto flex flex-col md:flex-row md:items-baseline md:justify-between gap-1">
    <a href="https://wusher.github.io/pages/" class="text-slate-700 text-sm">My Medusa Site</a>
    <div class="flex items-center gap-5 text-sm text-slate-500">
      
        <a href="https://wusher.github.io/pages/" class="hover:text-emerald-800">About</a>
      
        <a href="https://wusher.github.io/pages/projects/" class="hover:text-emerald-800">Projects</a>
      
        <a href="https://wusher.github.io/pages/posts/" class="hover:text-emerald-800">Blog</a>
      
    </div>
  </nav>
</header>
  <main class="flex-1 px-6">
    <article class="prose mx-auto">
      <h1>Data in Templates</h1>
<p>Medusa exposes several powerful objects to your Jinja2 templates, giving you full control over content rendering and site navigation.</p>
<h2>Template Globals</h2>
<p>Every template has access to these built-in variables:</p>
<h3>current_page</h3>
<p>The page object for the template currently being rendered. See the Page Schema section below for available properties.</p>
<h3>pages</h3>
<p>A PageCollection containing all pages on your site. Use filtering and sorting helpers to build navigation, archives, and related content sections.</p>
<h3>tags</h3>
<p>A TagCollection mapping tag names to their associated pages. Iterate over tags or access specific tag groups directly.</p>
<h3>data</h3>
<p>Merged YAML content from all files in your <code>data/</code> directory. Access nested data using dot notation: <code>data.title</code>, <code>data.author</code>, <code>data.nav</code>.</p>
<h2>Template Helpers</h2>
<h3>url_for(path)</h3>
<p>URL builder that generates correct paths for assets and pages. Keeps relative URLs intact for portability:</p>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">url_for</span><span class="o">(</span><span class="s1">&#39;assets/css/main.css&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">url_for</span><span class="o">(</span><span class="s1">&#39;assets/images/photo.jpg&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
<h3>font_path(filename)</h3>
<p>Helper to generate correct font paths:</p>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">font_path</span><span class="o">(</span><span class="s2">&quot;merriweather/Merriweather-VariableFont.ttf&quot;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
<h3>css_path(filename)</h3>
<p>Helper to generate correct CSS paths:</p>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">css_path</span><span class="o">(</span><span class="s1">&#39;main&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x">  </span><span class="c">{# generates path to main.css #}</span>
</pre></div>
<h2>Collections API</h2>
<h3>PageCollection</h3>
<p>Work with groups of pages using chainable methods:</p>
<table>
<thead>
<tr>
  <th>Method</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>group(name)</code></td>
  <td>Filter to pages in a specific directory group</td>
</tr>
<tr>
  <td><code>with_tag(tag)</code></td>
  <td>Filter to pages with a specific tag</td>
</tr>
<tr>
  <td><code>drafts()</code></td>
  <td>Filter to draft pages only</td>
</tr>
<tr>
  <td><code>published()</code></td>
  <td>Filter to non-draft pages only</td>
</tr>
<tr>
  <td><code>sorted(key=&quot;date&quot;, reverse=True)</code></td>
  <td>Sort by key, newest first by default</td>
</tr>
<tr>
  <td><code>latest(count=5)</code></td>
  <td>Get the most recent pages</td>
</tr>
</tbody>
</table>
<p>Chain methods together for precise filtering:</p>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="k">in</span> <span class="nv">pages.group</span><span class="o">(</span><span class="s2">&quot;posts&quot;</span><span class="o">)</span><span class="nv">.published</span><span class="o">()</span><span class="nv">.sorted</span><span class="o">()</span><span class="nv">.latest</span><span class="o">(</span><span class="m">3</span><span class="o">)</span> <span class="cp">%}</span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
<h3>TagCollection</h3>
<p>Access pages by tag:</p>
<div class="highlight"><pre><span></span><span class="c">{# Get pages with a specific tag #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">page</span> <span class="k">in</span> <span class="nv">tags</span><span class="o">[</span><span class="s2">&quot;python&quot;</span><span class="o">]</span><span class="nv">.sorted</span><span class="o">()</span> <span class="cp">%}</span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">page.title</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

<span class="c">{# Iterate all tags #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">tag</span><span class="o">,</span> <span class="nv">tag_pages</span> <span class="k">in</span> <span class="nv">tags.items</span><span class="o">()</span> <span class="cp">%}</span>
<span class="x">  &lt;h3&gt;</span><span class="cp">{{</span> <span class="nv">tag</span> <span class="cp">}}</span><span class="x"> (</span><span class="cp">{{</span> <span class="nv">tag_pages</span><span class="o">|</span><span class="nf">length</span> <span class="cp">}}</span><span class="x">)&lt;/h3&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
<h2>Page Schema</h2>
<p>Each page object provides these properties:</p>
<table>
<thead>
<tr>
  <th>Property</th>
  <th>Type</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>title</code></td>
  <td>str</td>
  <td>Page title from first heading or frontmatter</td>
</tr>
<tr>
  <td><code>body</code></td>
  <td>str</td>
  <td>Raw markdown/jinja source</td>
</tr>
<tr>
  <td><code>content</code></td>
  <td>str</td>
  <td>Rendered HTML body</td>
</tr>
<tr>
  <td><code>page_content</code></td>
  <td>str</td>
  <td>Rendered page content for use in templates</td>
</tr>
<tr>
  <td><code>description</code></td>
  <td>str</td>
  <td>First paragraph or frontmatter description</td>
</tr>
<tr>
  <td><code>url</code></td>
  <td>str</td>
  <td>Pretty URL path like <code>/posts/my-post/</code></td>
</tr>
<tr>
  <td><code>slug</code></td>
  <td>str</td>
  <td>URL-safe identifier</td>
</tr>
<tr>
  <td><code>date</code></td>
  <td>datetime</td>
  <td>Publication date from filename or file mtime</td>
</tr>
<tr>
  <td><code>tags</code></td>
  <td>list[str]</td>
  <td>Associated tags from frontmatter</td>
</tr>
<tr>
  <td><code>draft</code></td>
  <td>bool</td>
  <td>Whether this is a draft page</td>
</tr>
<tr>
  <td><code>layout</code></td>
  <td>str</td>
  <td>Template layout name</td>
</tr>
<tr>
  <td><code>group</code></td>
  <td>str</td>
  <td>First path segment (e.g., &quot;posts&quot;)</td>
</tr>
<tr>
  <td><code>path</code></td>
  <td>Path</td>
  <td>Source file path</td>
</tr>
<tr>
  <td><code>folder</code></td>
  <td>str</td>
  <td>Parent directory name</td>
</tr>
<tr>
  <td><code>filename</code></td>
  <td>str</td>
  <td>Source filename</td>
</tr>
<tr>
  <td><code>source_type</code></td>
  <td>str</td>
  <td>Either &quot;markdown&quot; or &quot;jinja&quot;</td>
</tr>
<tr>
  <td><code>frontmatter</code></td>
  <td>dict</td>
  <td>All YAML frontmatter data</td>
</tr>
</tbody>
</table>
<h3>Accessing Frontmatter</h3>
<p>Custom frontmatter fields are accessible via the <code>frontmatter</code> property:</p>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">current_page.frontmatter.github_url</span> <span class="cp">%}</span>
<span class="x">  &lt;a href=&quot;</span><span class="cp">{{</span> <span class="nv">current_page.frontmatter.github_url</span> <span class="cp">}}</span><span class="x">&quot;&gt;View on GitHub&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">if</span> <span class="nv">current_page.frontmatter.border_color</span> <span class="cp">%}</span>
<span class="x">  &lt;div style=&quot;border-color: </span><span class="cp">{{</span> <span class="nv">current_page.frontmatter.border_color</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
<h2>Practical Examples</h2>
<h3>Building a Tag Cloud</h3>
<div class="highlight"><pre><span></span><span class="x">&lt;div class=&quot;tags&quot;&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">tag</span><span class="o">,</span> <span class="nv">pages</span> <span class="k">in</span> <span class="nv">tags.items</span><span class="o">()</span> <span class="cp">%}</span>
<span class="x">  &lt;a href=&quot;/tags/</span><span class="cp">{{</span> <span class="nv">tag</span> <span class="cp">}}</span><span class="x">/&quot; class=&quot;tag&quot;&gt;</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">tag</span> <span class="cp">}}</span><span class="x"> &lt;span&gt;(</span><span class="cp">{{</span> <span class="nv">pages</span><span class="o">|</span><span class="nf">length</span> <span class="cp">}}</span><span class="x">)&lt;/span&gt;</span>
<span class="x">  &lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
<h3>Related Posts by Tag</h3>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">related</span> <span class="o">=</span> <span class="nv">pages.with_tag</span><span class="o">(</span><span class="nv">current_page.tags</span><span class="o">[</span><span class="m">0</span><span class="o">])</span><span class="nv">.sorted</span><span class="o">()</span><span class="nv">.latest</span><span class="o">(</span><span class="m">5</span><span class="o">)</span> <span class="cp">%}</span>
<span class="x">&lt;aside&gt;</span>
<span class="x">  &lt;h3&gt;Related Posts&lt;/h3&gt;</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="k">in</span> <span class="nv">related</span> <span class="k">if</span> <span class="nv">post.url</span> <span class="o">!=</span> <span class="nv">current_page.url</span> <span class="cp">%}</span>
<span class="x">    &lt;a href=&quot;</span><span class="cp">{{</span> <span class="nv">post.url</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="x">&lt;/a&gt;</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="x">&lt;/aside&gt;</span>
</pre></div>
<h3>Data-Driven Navigation</h3>
<div class="highlight"><pre><span></span><span class="c">{# Using data from data/site.yaml #}</span>
<span class="x">&lt;nav&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">data.nav</span> <span class="cp">%}</span>
<span class="x">  &lt;a href=&quot;</span><span class="cp">{{</span> <span class="nv">item.url</span> <span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">     </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">current_page.url</span> <span class="o">==</span> <span class="nv">item.url</span> <span class="cp">%}</span><span class="x">class=&quot;active&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x">&gt;</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">item.title</span> <span class="cp">}}</span>
<span class="x">  &lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="x">&lt;/nav&gt;</span>
</pre></div>

    </article>
  </main>
  <footer class="px-6 py-12">
  <div class="max-w-[50ch] mx-auto text-xs text-emerald-800 text-right">
    <p>&copy; 2025 Jane Doe</p>
    <p class="mt-1">Built with care</p>
  </div>
</footer>
</body>
</html>